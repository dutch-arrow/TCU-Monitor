import{arrow as e,computePosition as n}from"@floating-ui/dom";export*from"@floating-ui/dom";import{unref as l,computed as t,ref as u,shallowRef as a,watch as o,getCurrentScope as r,onScopeDispose as i,shallowReadonly as v}from"vue-demi";function f(e){var n;return null!=(n=null==e?void 0:e.$el)?n:e}function d(n){return{name:"arrow",options:n,fn(t){const u=f(l(n.element));return null==u?{}:e({element:u,padding:n.padding}).fn(t)}}}function s(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function m(e,n){const l=s(e);return Math.round(n*l)/l}function c(e,d,c){void 0===c&&(c={});const p=c.whileElementsMounted,w=t((()=>{var e;return null==(e=l(c.open))||e})),y=t((()=>l(c.middleware))),g=t((()=>{var e;return null!=(e=l(c.placement))?e:"bottom"})),x=t((()=>{var e;return null!=(e=l(c.strategy))?e:"absolute"})),h=t((()=>{var e;return null==(e=l(c.transform))||e})),D=t((()=>f(e.value))),b=t((()=>f(d.value))),M=u(0),P=u(0),C=u(x.value),E=u(g.value),R=a({}),S=u(!1),V=t((()=>{const e={position:C.value,left:"0",top:"0"};if(!b.value)return e;const n=m(b.value,M.value),l=m(b.value,P.value);return h.value?{...e,transform:"translate("+n+"px, "+l+"px)",...s(b.value)>=1.5&&{willChange:"transform"}}:{position:C.value,left:n+"px",top:l+"px"}}));let $;function j(){null!=D.value&&null!=b.value&&n(D.value,b.value,{middleware:y.value,placement:g.value,strategy:x.value}).then((e=>{M.value=e.x,P.value=e.y,C.value=e.strategy,E.value=e.placement,R.value=e.middlewareData,S.value=!0}))}function k(){"function"==typeof $&&($(),$=void 0)}return o([y,g,x],j,{flush:"sync"}),o([D,b],(function(){k(),void 0!==p?null==D.value||null==b.value||($=p(D.value,b.value,j)):j()}),{flush:"sync"}),o(w,(function(){w.value||(S.value=!1)}),{flush:"sync"}),r()&&i(k),{x:v(M),y:v(P),strategy:v(C),placement:v(E),middlewareData:v(R),isPositioned:v(S),floatingStyles:V,update:j}}export{d as arrow,c as useFloating};
