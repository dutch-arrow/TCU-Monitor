{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  components: {},\n  name: 'SetupPage',\n  props: ['showPage'],\n  data() {\n    return {\n      loading: false,\n      errmsg: '',\n      retrieveResult: '',\n      config: {\n        tcu: []\n      },\n      tcus: [{\n        value: {\n          name: '',\n          ipaddress: ''\n        },\n        text: ''\n      }],\n      tcu: {\n        name: '',\n        ipaddress: ''\n      },\n      devices: []\n    };\n  },\n  computed: {},\n  methods: {\n    getTcus() {\n      this.tcus = [];\n      for (var t of this.config.tcu) {\n        this.tcus.push({\n          value: {\n            name: t.name,\n            ipaddress: t.ipaddress\n          },\n          text: t.name\n        });\n      }\n    },\n    getProperties() {\n      this.loading = true;\n      this.axios.post(\"/api/command\", {\n        command: \"getProperties\",\n        data: {\n          ipaddress: this.tcu.ipaddress\n        }\n      }).then(response => {\n        var f = response.data;\n        if (f.error !== undefined) {\n          this.errmsg = \"danger\";\n          this.retrieveResult = f.error;\n        } else {\n          this.devices = [];\n          for (var dev of f.devices) {\n            this.devices.push(dev.device);\n          }\n        }\n        this.loading = false;\n      }).catch(error => {\n        this.retrieveResult = error.message;\n        this.errmsg = \"danger\";\n        this.loading = false;\n      });\n    },\n    getTimers() {\n      this.loading = true;\n      this.axios.post(\"/api/command\", {\n        command: \"getTimers\",\n        data: {\n          ipaddress: this.tcu.ipaddress\n        }\n      }).then(response => {\n        var f = response.data;\n        if (f.error !== undefined) {\n          this.errmsg = \"danger\";\n          this.retrieveResult = f.error;\n        } else {\n          this.errmsg = \"success\";\n          this.retrieveResult = \"\";\n          console.log(f);\n        }\n        this.loading = false;\n      }).catch(error => {\n        this.retrieveResult = error.message;\n        this.errmsg = \"danger\";\n        this.loading = false;\n      });\n    }\n  },\n  watch: {\n    tcu(newValue) {\n      if (newValue != undefined) {\n        this.getTimers();\n      }\n    }\n  },\n  mounted() {\n    this.emitter.on('config', cfg => {\n      this.config = cfg;\n      this.getTcus();\n    });\n  }\n};","map":{"version":3,"mappings":"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","names":["components","name","props","data","loading","errmsg","retrieveResult","config","tcu","tcus","value","ipaddress","text","devices","computed","methods","getTcus","t","push","getProperties","axios","post","command","then","response","f","error","undefined","dev","device","catch","message","getTimers","console","log","watch","newValue","mounted","emitter","on","cfg"],"sourceRoot":"","sources":["/homes/tom/Workspaces/java/tcu-monitor/src/main/vue/src/components/TcuSetup.vue"],"sourcesContent":["<template>\n  <BCard title=\"TCU Setup\" v-show=\"showPage\" >\n    <BAlert :model-value=\"retrieveResult !== ''\" :variant=\"errmsg\" show>{{ retrieveResult }}</BAlert>\n    <BOverlay :show=\"loading\" variant=\"light\" opacity=\"0.6\" rounded=\"sm\"></BOverlay>\n    <BCard notitle>\n        <BFormGroup label-cols-sm=\"5\" label-align-sm=\"end\" label=\"Kies de TCU:\" label-for=\"input-1\" content-cols-sm=\"2\" class=\"text-size\">\n          <BFormSelect id=\"input-1\" v-model=\"tcu\" :options=\"tcus\" class=\"text-size\"></BFormSelect>\n        </BFormGroup>\n      </BCard>\n  </BCard>\n</template>\n\n<style>\n.text-size {\n  font-size: 18px;\n}\n</style>\n<script>\n\nexport default {\n  components: {\n    \n  },\n  name: 'SetupPage',\n  props: ['showPage'],\n  data() {\n    return {\n      loading: false,\n      errmsg: '',\n      retrieveResult: '',\n      config:{tcu:[]},\n      tcus:[{value:{name:'',ipaddress:''},text:''}],\n      tcu:{name:'',ipaddress:''},\n      devices:[],\n    }\n  },\n  computed: {\n  },\n  methods: {\n    getTcus() {\n      this.tcus = [];\n      for (var t of this.config.tcu) {\n        this.tcus.push({value:{name:t.name,ipaddress:t.ipaddress},text:t.name});\n      }\n    },\n    getProperties() {\n      this.loading = true;\n      this.axios.post(\"/api/command\", {\n        command: \"getProperties\",\n        data: {ipaddress:this.tcu.ipaddress}\n      })\n      .then(response => {\n        var f = response.data;\n        if (f.error !== undefined) {\n          this.errmsg = \"danger\";\n          this.retrieveResult = f.error;\n        } else {\n          this.devices = [];\n          for (var dev of f.devices) {\n            this.devices.push(dev.device);\n          }\n        }\n        this.loading = false;\n      })\n      .catch(error => {\n        this.retrieveResult = error.message;\n        this.errmsg = \"danger\";\n        this.loading = false;\n      });\n    },\n    getTimers() {\n      this.loading = true;\n      this.axios.post(\"/api/command\", {\n        command: \"getTimers\",\n        data: {ipaddress:this.tcu.ipaddress}\n      })\n      .then(response => {\n        var f = response.data;\n        if (f.error !== undefined) {\n          this.errmsg = \"danger\";\n          this.retrieveResult = f.error;\n        } else {\n          this.errmsg = \"success\";\n          this.retrieveResult = \"\";\n          console.log(f);\n        }\n        this.loading = false;\n      })\n      .catch(error => {\n        this.retrieveResult = error.message;\n        this.errmsg = \"danger\";\n        this.loading = false;\n      });\n    }\n  },\n  watch: {\n    tcu(newValue) {\n      if (newValue != undefined) {\n        this.getTimers();\n      }\n    },\n  },\n  mounted() {\n    this.emitter.on('config', cfg => {\n        this.config = cfg;\n        this.getTcus();\n      }\n    );\n  }\n}\n\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}